// Prisma Schema for Person Management System
// Simplified version focusing only on Person entity

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================
// ENUMS - DEFINITIONS
// ============================================

/// Tipos de documento de identidad válidos en Perú
enum DocumentType {
  DNI       /// Documento Nacional de Identidad
  RUC       /// Registro Único de Contribuyentes
  CE        /// Carné de Extranjería
  PASSPORT  /// Pasaporte
}

/// Estados generales para entidades del sistema
enum EntityStatus {
  ACTIVE    /// Activo
  INACTIVE  /// Inactivo
  SUSPENDED /// Suspendido
  DELETED   /// Eliminado
}

// ============================================
// MODELS - ENTITIES
// ============================================

/// Gestión de personas (clientes, proveedores, usuarios)
model Person {
  id              String   @id @default(uuid())
  documentType    DocumentType @map("document_type")
  documentNumber  String   @unique @map("document_number")
  names           String
  legalName       String?  @map("legal_name")
  address         String?
  phone           String?
  email           String?
  status          EntityStatus @default(ACTIVE)
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")
  
  @@index([documentNumber])
  @@index([status])
  @@map("persons")
}